<section class="crud-card asignatura-card">
  <div class="crud-card__header">
    <div class="crud-card__title">
      <span aria-hidden="true" class="crud-card__icon">📘</span>
      <div>
        <h2>Asignaturas</h2>
        <p>Crea y actualiza las asignaturas disponibles.</p>
      </div>
    </div>
    <div class="crud-card__actions">
      <button type="button" class="btn btn-primary" (click)="loadAsignaturas()" [disabled]="loading()">
        Consultar
      </button>
    </div>
  </div>

  <div class="crud-card__body">
    <form class="crud-form crud-form--inline" [formGroup]="createForm" (ngSubmit)="createAsignatura()">
      <div class="crud-field">
        <label class="visually-hidden" for="asignatura-nombre">Nombre de la asignatura</label>
        <input id="asignatura-nombre" type="text" formControlName="nombre" placeholder="Nombre de la asignatura" />
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="createForm.invalid || loading()">
        Guardar Asignatura
      </button>
    </form>

    <div class="utility-forms">
      <form class="crud-form crud-form--inline" [formGroup]="updateForm" (ngSubmit)="updateAsignatura()">
        <div class="crud-field">
          <label class="visually-hidden" for="asignatura-update-id">Código para actualizar</label>
          <input id="asignatura-update-id" type="number" formControlName="id" placeholder="Código de asignatura" />
        </div>
        <div class="crud-field">
          <label class="visually-hidden" for="asignatura-update-nombre">Nombre</label>
          <input id="asignatura-update-nombre" type="text" formControlName="nombre" placeholder="Nuevo nombre" />
        </div>
        <button type="submit" class="btn btn-flat" [disabled]="updateForm.invalid || loading()">
          Actualizar
        </button>
      </form>

      <form class="crud-form crud-form--inline" [formGroup]="deleteForm" (ngSubmit)="deleteAsignatura()">
        <div class="crud-field">
          <label class="visually-hidden" for="asignatura-delete-id">Código para eliminar</label>
          <input id="asignatura-delete-id" type="number" formControlName="id" placeholder="Código para eliminar" />
        </div>
        <button type="submit" class="btn btn-flat" [disabled]="deleteForm.invalid || loading()">
          Eliminar
        </button>
      </form>
    </div>
  </div>

  <div class="table-wrapper" *ngIf="asignaturas().length > 0; else emptyAsignaturas">
    <table class="data-table">
      <thead>
        <tr>
          <th>Nombre</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let asignatura of asignaturas()">
          <td>{{ asignatura.nombre }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #emptyAsignaturas>
    <div class="empty-state">Consulta para ver las asignaturas registradas.</div>
  </ng-template>

  @if (lastMessage()) {
    <p class="status-message">{{ lastMessage() }}</p>
  }
</section>
